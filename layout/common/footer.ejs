<footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2016 - <%= date(new Date(), 'YYYY') %> <%= get_config('author') || get_config('title') %>&nbsp;
                <a href="http://www.miitbeian.gov.cn/">皖ICP备18004846号</a>
            </div>
            
            <div class="column is-hidden-mobile"></div>
        </div>

    <div class="columns">
        <div class="column is-narrow has-text-centered">
                            <span id="busuanzi_container_site_pv">
                                <i class="fa fa-eye"></i>
                                <span id="busuanzi_value_site_pv"></span>次
                            </span>
                            <span id="busuanzi_container_site_uv">
                                <i class="fa fa-user"></i>
                                <span id="busuanzi_value_site_uv"></span>人次
                            </span>
                    &nbsp;Powered by
                    <a href="http://hexo.io/" target="_blank">Hexo</a> &
                    <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
        </div>
    
        <div class="column is-hidden-mobile"></div>
    
        <% if (has_config('footer_links')) { %>
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                    <% for (let name in get_config('footer_links')) { %>
                        <% let link = get_config('footer_links')[name]; %>
                            <a class="column is-narrow has-text-black" href="<%= typeof(link) === 'string' ? link : link.url%>">
                                <% if (typeof(link) === 'string') { %>
                                    <%= name %>
                                        <% } else { %>
                                            <i class="<%= link.icon %>"></i>
                                            <% } %>
                            </a>
                            <% } %>
                </div>
            </div>
            <% } %>
                <%- partial('common/languages') %>
    </div>


    </div>
</footer>

<% if (has_config('leancloud_visitors.enable')) { %>
    <script>
        // 显示次数
        function showTime(Counter) {
            var query = new AV.Query("Counter");
            if ($(".leancloud_visitors").length > 0) {
                var url = $(".leancloud_visitors").attr('id').trim();
                // where field
                query.equalTo("words", url);
                // count 
                query.count().then(function (number) {
                    // There are number instances of MyClass where words equals url.
                    $(document.getElementById(url)).text(number ? number : '--');
                }, function (error) {
                    // error is an instance of AVError.
                });
            }
        }
        // 追加pv
        function addCount(Counter) {
            var url = $(".leancloud_visitors").length > 0 ? $(".leancloud_visitors").attr('id').trim() : 'icafebolger.com';
            var Counter = AV.Object.extend("Counter");
            var query = new Counter;
            query.save({
                words: url
            }).then(function (object) {
            })
        }
        $(function () {
            var Counter = AV.Object.extend("Counter");
            addCount(Counter);
            showTime(Counter);
        });
    </script>
    <% } %>